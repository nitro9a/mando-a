#: import NoTransition kivy.uix.screenmanager.NoTransition


<ScaleButton>:
    size_hint: .2, .05
    color: (0/255., 0/255., 0/255., 1)
    background_normal: ''
    background_color: (155/255., 155/255., 155/255., 1)
    allow_stretch: False
    keep_ratio: True
<ScaleLabel>:
    size_hint: .5, .5
    pos_hint: {'top': .65, 'center_x': .5}
    color: (0/255., 0/255., 0/255., 1)
    background_normal: ''
    bcolor: (155/255., 155/255., 155/255., 1)
    allow_stretch: False
    keep_ratio: True
<ScrollableLabel>:
    bcolor: (155/255., 155/255., 155/255., 1)
    color: (0/255., 0/255., 0/255., 1)
<SelectableButton>:
    color: (0/255., 255/255., 0/255., 1)
    background_color: (0/255., 155/255., 155/255., 1)

<MessageBox>:
    name: 'mbox'
    lbl: lbl
    title: ''
    size_hint: None, None
    size: 400, 400
    on_open:
        en = [entry[0] for entry in app.root.get_screen('unread').rows]
        lbl.text = str(en)
        #print(en)

    BoxLayout:
        orientation: 'vertical'
        Label:
            id: lbl
            text: ''
        Button:
            size_hint: 1, 0.2
            text: 'OK'
            on_press:
                root.dismiss()


WindowManager:
    transition: NoTransition()
    WordADay:
    UnreadWords:
    ReadWords:
    Favorites:

<WordADay>:

    name: "word"
    get: get
    translation: translation

    BoxLayout:
        spacing: 10
        padding: 10
        orientation: "vertical"
        rows: 3
        cols: 1

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 5

            ScaleButton:
                id: page1
                text: "Page 1"
                on_release:
                    app.root.current = "word"

            ScaleButton:
                id: page2
                text: "Page 2"
                on_release:
                    app.root.current = "unread"
                    root.manager.get_screen('unread').display_database()

            ScaleButton:
                id: page3
                text: "Page 3"
                on_release:
                    app.root.current = "read"

            ScaleButton:
                id: page4
                text: "Page 4"
                on_release:
                    app.root.current = "favorites"

        GridLayout:
            cols: 1
            rows: 1
            spacing: 10
            size_hint_y: 30

            ScaleButton:
                id: get
                text: "Get a Word"
                pos_hint: {'top': .85, 'center_x': .5}
                on_press: root.random_word()

        GridLayout:
            cols: 1
            rows: 1
            spacing: 10
            size_hint_y: 65

            ScaleLabel:
                id: translation
                text: ""
                pos_hint: {'top': .65, 'center_x': .5}
                size_hint: .7, .5
                font_size: 25
                valign: 'top'
                halign: 'center'
                text_size: self.size
                height: self.texture_size[1]

<UnreadWords>:
    name: "unread"
    reset: reset
    unread_table: unread_table

    BoxLayout:
        spacing: 10
        padding: 10
        orientation: "vertical"
        rows: 4
        cols: 1

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 5

            ScaleButton:
                id: page1
                text: "Page 1"
                on_release:
                    app.root.current = "word"

            ScaleButton:
                id: page2
                text: "Page 2"
                on_release:
                    app.root.current = "unread"
                    root.display_database()

            ScaleButton:
                id: page3
                text: "Page 3"
                on_release:
                    app.root.current = "read"

            ScaleButton:
                id: page4
                text: "Page 4"
                on_release:
                    app.root.current = "favorites"
        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 5

            ScaleLabel:
                text: "Unread Words"
                size_hint_y: 5

        GridLayout:
            cols: 1
            rows: 1
            spacing: 0
            size_hint_y: 80

            BoxLayout:
                id: unread_table
                RV:
                    viewclass: 'SelectableButton'
                    size_hint_y: 1
                    font_size: self.height * 0.5
                    data: [{'text': f'{entry[0]}'} for entry in root.rows]

        GridLayout:
            cols: 2
            rows: 1
            spacing: 0
            size_hint_y: 10

            ScaleButton:
                id: reset
                text: "Reset Dictionaries"
                pos_hint: {'top': .85, 'center_x': .5}
                on_press: root.reset_databases()


<ReadWords>:
    name: "read"
    BoxLayout:
        spacing: 10
        padding: 10
        orientation: "vertical"
        rows: 3
        cols: 1

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 5

            ScaleButton:
                id: page1
                text: "Page 1"
                on_release:
                    app.root.current = "word"

            ScaleButton:
                id: page2
                text: "Page 2"
                on_release:
                    app.root.current = "unread"
                    root.manager.get_screen('unread').display_database()

            ScaleButton:
                id: page3
                text: "Page 3"
                on_release:
                    app.root.current = "read"

            ScaleButton:
                id: page4
                text: "Page 4"
                on_release:
                    app.root.current = "favorites"

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 30

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 65

<Favorites>:
    name: "favorites"
    BoxLayout:
        spacing: 10
        padding: 10
        orientation: "vertical"
        rows: 3
        cols: 1

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 5

            ScaleButton:
                id: page1
                text: "Page 1"
                on_release:
                    app.root.current = "word"

            ScaleButton:
                id: page2
                text: "Page 2"
                on_release:
                    app.root.current = "unread"

            ScaleButton:
                id: page3
                text: "Page 3"
                on_release:
                    app.root.current = "read"

            ScaleButton:
                id: page4
                text: "Page 4"
                on_release:
                    app.root.current = "favorites"

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 30

        GridLayout:
            cols: 4
            rows: 1
            spacing: 0
            size_hint_y: 65

